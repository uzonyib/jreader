<html xmlns:concordion="http://www.concordion.org/2007/concordion">
	<head>
		<title>Group related tests</title>
	</head>
	<body>
	
		<h1>Group related tests</h1>
		
		<p>
			When <span concordion:execute="initUser(#TEXT)">group_user</span> is a new user<br/>
			then the group count is <span concordion:assertEquals="getGroupCount()">0</span>.
		</p>
		
		<p>
			When the user creates a new group with title <span concordion:set="#title">group1</span> and order <span concordion:execute="#groupId1 = createGroup(#title, #TEXT)">0</span><br/>
			then the group count is <span concordion:assertEquals="getGroupCount()">1</span><br/>
			and the group list contains:
		</p>
		<table concordion:verifyRows="#group : getGroups()">
			<tr>
				<th concordion:echo="#group.id">ID</th>
				<th concordion:assertEquals="#group.title">Title</th>
				<th concordion:assertEquals="#group.order">Order</th>
			</tr>
			<tr>
				<td></td>
				<td>group1</td>
				<td>0</td>
			</tr>
		</table>
		
		<p>
			When the user tries to create a new group with <span concordion:set="#title">empty string</span> as title and order <span concordion:execute="createGroup(#title, #TEXT)">1</span><br/>
			then the group count is still <span concordion:assertEquals="getGroupCount()">1</span><br/>
			and the group list contains:
		</p>
		<table concordion:verifyRows="#group : getGroups()">
			<tr>
				<th concordion:echo="#group.id">ID</th>
				<th concordion:assertEquals="#group.title">Title</th>
				<th concordion:assertEquals="#group.order">Order</th>
			</tr>
			<tr>
				<td></td>
				<td>group1</td>
				<td>0</td>
			</tr>
		</table>
	   	
	   	<p>
			When the user tries to create a new group with title <span concordion:set="#title">group1</span> and order <span concordion:execute="createGroup(#title, #TEXT)">1</span><br/>
			then the group count is still <span concordion:assertEquals="getGroupCount()">1</span><br/>
			and the group list contains:
		</p>
		<table concordion:verifyRows="#group : getGroups()">
			<tr>
				<th concordion:echo="#group.id">ID</th>
				<th concordion:assertEquals="#group.title">Title</th>
				<th concordion:assertEquals="#group.order">Order</th>
			</tr>
			<tr>
				<td></td>
				<td>group1</td>
				<td>0</td>
			</tr>
		</table>
	   	
	   	<p>
			When the user creates the following groups:
		</p>
		<table>
			<tr>
				<th>Title</th>
				<th>Order</th>
			</tr>
			<tr>
				<td concordion:set="#title">group2</td>
				<td concordion:execute="#groupId2 = createGroup(#title, #TEXT)">1</td>
			</tr>
			<tr>
				<td concordion:set="#title">group3</td>
				<td concordion:execute="#groupId3 = createGroup(#title, #TEXT)">2</td>
			</tr>
			<tr>
				<td concordion:set="#title">group4</td>
				<td concordion:execute="#groupId4 = createGroup(#title, #TEXT)">3</td>
			</tr>
		</table>
		<p>
			then the group count is <span concordion:assertEquals="getGroupCount()">4</span><br/>
			and the group list contains:
		</p>
		<table concordion:verifyRows="#group : getGroups()">
			<tr>
				<th concordion:echo="#group.id">ID</th>
				<th concordion:assertEquals="#group.title">Title</th>
				<th concordion:assertEquals="#group.order">Order</th>
			</tr>
			<tr>
				<td></td>
				<td>group1</td>
				<td>0</td>
			</tr>
			<tr>
				<td></td>
				<td>group2</td>
				<td>1</td>
			</tr>
			<tr>
				<td></td>
				<td>group3</td>
				<td>2</td>
			</tr>
			<tr>
				<td></td>
				<td>group4</td>
				<td>3</td>
			</tr>
		</table>
	   	
		<p>
			When the user deletes group #<span concordion:execute="deleteGroup(#groupId4)"><span concordion:echo="#groupId4"></span></span><br/>
			then the group count is <span concordion:assertEquals="getGroupCount()">3</span><br/>
			and the group list contains:
		</p>
		<table concordion:verifyRows="#group : getGroups()">
			<tr>
				<th concordion:echo="#group.id">ID</th>
				<th concordion:assertEquals="#group.title">Title</th>
				<th concordion:assertEquals="#group.order">Order</th>
			</tr>
			<tr>
				<td></td>
				<td>group1</td>
				<td>0</td>
			</tr>
			<tr>
				<td></td>
				<td>group2</td>
				<td>1</td>
			</tr>
			<tr>
				<td></td>
				<td>group3</td>
				<td>2</td>
			</tr>
		</table>
	   	
		<p>
			When the user changes the title of group #<span concordion:echo="#groupId2"></span> to <span concordion:execute="entitleGroup(#groupId2, #TEXT)">test</span><br/>
			then the group count is <span concordion:assertEquals="getGroupCount()">3</span><br/>
			and the group list contains:
		</p>
		<table concordion:verifyRows="#group : getGroups()">
			<tr>
				<th concordion:echo="#group.id">ID</th>
				<th concordion:assertEquals="#group.title">Title</th>
				<th concordion:assertEquals="#group.order">Order</th>
			</tr>
			<tr>
				<td></td>
				<td>group1</td>
				<td>0</td>
			</tr>
			<tr>
				<td></td>
				<td>test</td>
				<td>1</td>
			</tr>
			<tr>
				<td></td>
				<td>group3</td>
				<td>2</td>
			</tr>
		</table>
		
		<p>
			When the user tries to change the title of group #<span concordion:echo="#groupId2"></span> to <span concordion:execute="entitleGroup(#groupId2, #TEXT)">empty string</span><br/>
			then the group count is <span concordion:assertEquals="getGroupCount()">3</span><br/>
			and the group list contains:
		</p>
		<table concordion:verifyRows="#group : getGroups()">
			<tr>
				<th concordion:echo="#group.id">ID</th>
				<th concordion:assertEquals="#group.title">Title</th>
				<th concordion:assertEquals="#group.order">Order</th>
			</tr>
			<tr>
				<td></td>
				<td>group1</td>
				<td>0</td>
			</tr>
			<tr>
				<td></td>
				<td>test</td>
				<td>1</td>
			</tr>
			<tr>
				<td></td>
				<td>group3</td>
				<td>2</td>
			</tr>
		</table>
		
		<p>
			When the user tries to change the title of group #<span concordion:echo="#groupId2"></span> to <span concordion:execute="entitleGroup(#groupId2, #TEXT)">group1</span><br/>
			then the group count is <span concordion:assertEquals="getGroupCount()">3</span><br/>
			and the group list contains:
		</p>
		<table concordion:verifyRows="#group : getGroups()">
			<tr>
				<th concordion:echo="#group.id">ID</th>
				<th concordion:assertEquals="#group.title">Title</th>
				<th concordion:assertEquals="#group.order">Order</th>
			</tr>
			<tr>
				<td></td>
				<td>group1</td>
				<td>0</td>
			</tr>
			<tr>
				<td></td>
				<td>test</td>
				<td>1</td>
			</tr>
			<tr>
				<td></td>
				<td>group3</td>
				<td>2</td>
			</tr>
		</table>
	   	
		<p>
			When the user moves group #<span concordion:echo="#groupId3"></span> <span concordion:execute="moveGroup(#groupId3, #TEXT)">up</span><br/>
			then the group count is <span concordion:assertEquals="getGroupCount()">3</span><br/>
			and the group list contains:
		</p>
		<table concordion:verifyRows="#group : getGroups()">
			<tr>
				<th concordion:echo="#group.id">ID</th>
				<th concordion:assertEquals="#group.title">Title</th>
				<th concordion:assertEquals="#group.order">Order</th>
			</tr>
			<tr>
				<td></td>
				<td>group1</td>
				<td>0</td>
			</tr>
			<tr>
				<td></td>
				<td>group3</td>
				<td>1</td>
			</tr>
			<tr>
				<td></td>
				<td>test</td>
				<td>2</td>
			</tr>
		</table>
	   	
		<p>
			When the user moves group #<span concordion:echo="#groupId1"></span> <span concordion:execute="moveGroup(#groupId1, #TEXT)">down</span><br/>
			then the group count is <span concordion:assertEquals="getGroupCount()">3</span><br/>
			and the group list contains:
		</p>
		<table concordion:verifyRows="#group : getGroups()">
			<tr>
				<th concordion:echo="#group.id">ID</th>
				<th concordion:assertEquals="#group.title">Title</th>
				<th concordion:assertEquals="#group.order">Order</th>
			</tr>
			<tr>
				<td></td>
				<td>group3</td>
				<td>0</td>
			</tr>
			<tr>
				<td></td>
				<td>group1</td>
				<td>1</td>
			</tr>
			<tr>
				<td></td>
				<td>test</td>
				<td>2</td>
			</tr>
		</table>
	   	
		<p>
			When the user moves group #<span concordion:echo="#groupId3"></span> <span concordion:execute="moveGroup(#groupId3, #TEXT)">up</span><br/>
			then the group count is <span concordion:assertEquals="getGroupCount()">3</span><br/>
			and the group list contains:
		</p>
		<table concordion:verifyRows="#group : getGroups()">
	       	<tr>
				<th concordion:echo="#group.id">ID</th>
				<th concordion:assertEquals="#group.title">Title</th>
				<th concordion:assertEquals="#group.order">Order</th>
			</tr>
			<tr>
				<td></td>
				<td>group3</td>
				<td>0</td>
			</tr>
			<tr>
				<td></td>
				<td>group1</td>
				<td>1</td>
			</tr>
			<tr>
				<td></td>
				<td>test</td>
				<td>2</td>
			</tr>
	   	</table>
	   	
		<p>
			When the user moves group #<span concordion:echo="#groupId2"></span> <span concordion:execute="moveGroup(#groupId2, #TEXT)">down</span><br/>
			then the group count is <span concordion:assertEquals="getGroupCount()">3</span><br/>
			and the group list contains:
		</p>
		<table concordion:verifyRows="#group : getGroups()">
	       	<tr>
				<th concordion:echo="#group.id">ID</th>
				<th concordion:assertEquals="#group.title">Title</th>
				<th concordion:assertEquals="#group.order">Order</th>
			</tr>
			<tr>
				<td></td>
				<td>group3</td>
				<td>0</td>
			</tr>
			<tr>
				<td></td>
				<td>group1</td>
				<td>1</td>
			</tr>
			<tr>
				<td></td>
				<td>test</td>
				<td>2</td>
			</tr>
	   	</table>
	   	
	</body>
</html>