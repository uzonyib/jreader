<html xmlns:concordion="http://www.concordion.org/2007/concordion">
	<head>
		<title>Subscription related tests</title>
	</head>
	<body>
	
		<h1>Subscription related tests</h1>
		
		<p>
			Test feeds:
		</p>
		<table concordion:execute="initFeed(#title, #url)">
			<tr>
				<th concordion:set="#title">Title</th>
				<th concordion:set="#url">URL</th>
			</tr>
			<tr>
				<td>feed1</td>
				<td>http://www.feed1.com/rss.xml</td>
			</tr>
			<tr>
				<td>feed2</td>
				<td>http://www.feed2.com/rss.xml</td>
			</tr>
			<tr>
				<td>feed3</td>
				<td>http://www.feed3.com/rss.xml</td>
			</tr>
			<tr>
				<td>feed4</td>
				<td>http://www.feed4.com/rss.xml</td>
			</tr>
		</table>
		
		<p>
			Given <span concordion:execute="initUser(#TEXT)">user1</span> is a new user<br/>
			when he creates a new group with title <span concordion:execute="#groupId = createGroup(#TEXT)">group1</span><br/>
			then the subscription size of group #<span concordion:echo="#groupId"></span> is <span concordion:assertEquals="getSubscriptionCount(#groupId)">0</span>.
		</p>
		
		<p>
			Given <span concordion:execute="initUser(#TEXT)">user2</span> has the following groups:
		</p>
		<table concordion:execute="#groupId = createGroup(#title)">
	       	<tr>
	       		<th concordion:set="#title">Title</th>
	       		<th concordion:echo="#groupId">ID</th>
	       	</tr>
	       		<tr><td>group1</td>
	       		<td></td>
	       	</tr>
	   	</table>
		<p>
			when he subscribes to <span concordion:set="#feed">feed1</span> under group #<span concordion:execute="subscribe(#feed, #groupId)"><span concordion:echo="#groupId"></span></span><br/>
			then the subscription count of group #<span concordion:echo="#groupId"></span> is <span concordion:assertEquals="getSubscriptionCount(#groupId)">1</span><br/>
			and the subscription list contains:
		</p>
		<table concordion:verifyRows="#subscription : getSubscriptions()">
			<tr>
	       		<th concordion:assertEquals="#subscription.groupTitle">Group title</th>
	       		<th concordion:echo="#subscription.groupId">Group ID</th>
	       		<th concordion:assertEquals="#subscription.title">Subscription title</th>
	       		<th concordion:echo="#subscription.id">Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed1</td>
	       		<td></td>
	       	</tr>
	   	</table>
	   	
	   	<p>
			Given <span concordion:execute="initUser(#TEXT)">user3</span> has the following subscriptions:
		</p>
		<table>
	       	<tr>
	       		<th>Group title</th>
	       		<th>Group ID</th>
	       		<th>Subscription title</th>
	       		<th>Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#groupId = createGroup(#TEXT)">group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed1</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed2</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	   	</table>
		<p>
			when he subscribes to <span concordion:set="#feed">feed3</span> under group #<span concordion:execute="subscribe(#feed, #groupId)"><span concordion:echo="#groupId"></span></span><br/>
			then the subscription count of group #<span concordion:echo="#groupId"></span> is <span concordion:assertEquals="getSubscriptionCount(#groupId)">3</span><br/>
			and the subscription list contains:
		</p>
		<table concordion:verifyRows="#subscription : getSubscriptions()">
			<tr>
	       		<th concordion:assertEquals="#subscription.groupTitle">Group title</th>
	       		<th concordion:echo="#subscription.groupId">Group ID</th>
	       		<th concordion:assertEquals="#subscription.title">Subscription title</th>
	       		<th concordion:echo="#subscription.id">Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed1</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed2</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed3</td>
	       		<td></td>
	       	</tr>
	   	</table>
	   	
	   	<p>
			Given <span concordion:execute="initUser(#TEXT)">user4</span> has the following subscriptions:
		</p>
		<table>
	       	<tr>
	       		<th>Group title</th>
	       		<th>Group ID</th>
	       		<th>Subscription title</th>
	       		<th>Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#groupId = createGroup(#TEXT)">group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed1</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#idToDelete = subscribe(#TEXT, #groupId)">feed2</td>
	       		<td concordion:echo="#idToDelete"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed3</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	   	</table>
		<p>
			when he deletes subscription #<span concordion:execute="deleteSubscription(#groupId, #idToDelete)"><span concordion:echo="#idToDelete"></span></span><br/>
			then the subscription count of group #<span concordion:echo="#groupId"></span> is <span concordion:assertEquals="getSubscriptionCount(#groupId)">2</span><br/>
			and the subscription list contains:
		</p>
		<table concordion:verifyRows="#subscription : getSubscriptions()">
			<tr>
	       		<th concordion:assertEquals="#subscription.groupTitle">Group title</th>
	       		<th concordion:echo="#subscription.groupId">Group ID</th>
	       		<th concordion:assertEquals="#subscription.title">Subscription title</th>
	       		<th concordion:echo="#subscription.id">Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed1</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed3</td>
	       		<td></td>
	       	</tr>
	   	</table>
	   	
	   	<p>
			Given <span concordion:execute="initUser(#TEXT)">user5</span> has the following subscriptions:
		</p>
		<table>
	       	<tr>
	       		<th>Group title</th>
	       		<th>Group ID</th>
	       		<th>Subscription title</th>
	       		<th>Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#groupId = createGroup(#TEXT)">group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed1</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	   	</table>
		<p>
			when he entitles subscription #<span concordion:echo="#subscriptionId"></span> as <span concordion:execute="entitleSubscription(#groupId, #subscriptionId, #TEXT)">test</span><br/>
			then the subscription count of group #<span concordion:echo="#groupId"></span> is <span concordion:assertEquals="getSubscriptionCount(#groupId)">1</span><br/>
			and the subscription list contains:
		</p>
		<table concordion:verifyRows="#subscription : getSubscriptions()">
			<tr>
	       		<th concordion:assertEquals="#subscription.groupTitle">Group title</th>
	       		<th concordion:echo="#subscription.groupId">Group ID</th>
	       		<th concordion:assertEquals="#subscription.title">Subscription title</th>
	       		<th concordion:echo="#subscription.id">Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>test</td>
	       		<td></td>
	       	</tr>
	   	</table>
	   	
	   	<p>
			Given <span concordion:execute="initUser(#TEXT)">user6</span> has the following subscriptions:
		</p>
		<table>
	       	<tr>
	       		<th>Group title</th>
	       		<th>Group ID</th>
	       		<th>Subscription title</th>
	       		<th>Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#groupId = createGroup(#TEXT)">group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed1</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#idToUpdate = subscribe(#TEXT, #groupId)">feed2</td>
	       		<td concordion:echo="#idToUpdate"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed3</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	   	</table>
		<p>
			when he moves subscription #<span concordion:echo="#idToUpdate"></span> <span concordion:execute="moveSubscription(#groupId, #idToUpdate, #TEXT)">up</span><br/>
			then the subscription count of group #<span concordion:echo="#groupId"></span> is <span concordion:assertEquals="getSubscriptionCount(#groupId)">3</span><br/>
			and the subscription list contains:
		</p>
		<table concordion:verifyRows="#subscription : getSubscriptions()">
			<tr>
	       		<th concordion:assertEquals="#subscription.groupTitle">Group title</th>
	       		<th concordion:echo="#subscription.groupId">Group ID</th>
	       		<th concordion:assertEquals="#subscription.title">Subscription title</th>
	       		<th concordion:echo="#subscription.id">Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed2</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed1</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed3</td>
	       		<td></td>
	       	</tr>
	   	</table>
	   	
	   	<p>
			Given <span concordion:execute="initUser(#TEXT)">user7</span> has the following subscriptions:
		</p>
		<table>
	       	<tr>
	       		<th>Group title</th>
	       		<th>Group ID</th>
	       		<th>Subscription title</th>
	       		<th>Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#groupId = createGroup(#TEXT)">group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed1</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#idToUpdate = subscribe(#TEXT, #groupId)">feed2</td>
	       		<td concordion:echo="#idToUpdate"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed3</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	   	</table>
		<p>
			when he moves subscription #<span concordion:echo="#idToUpdate"></span> <span concordion:execute="moveSubscription(#groupId, #idToUpdate, #TEXT)">down</span><br/>
			then the subscription count of group #<span concordion:echo="#groupId"></span> is <span concordion:assertEquals="getSubscriptionCount(#groupId)">3</span><br/>
			and the subscription list contains:
		</p>
		<table concordion:verifyRows="#subscription : getSubscriptions()">
			<tr>
	       		<th concordion:assertEquals="#subscription.groupTitle">Group title</th>
	       		<th concordion:echo="#subscription.groupId">Group ID</th>
	       		<th concordion:assertEquals="#subscription.title">Subscription title</th>
	       		<th concordion:echo="#subscription.id">Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed1</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed3</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed2</td>
	       		<td></td>
	       	</tr>
	   	</table>
	   	
	   	<p>
			Given <span concordion:execute="initUser(#TEXT)">user8</span> has the following subscriptions:
		</p>
		<table>
	       	<tr>
	       		<th>Group title</th>
	       		<th>Group ID</th>
	       		<th>Subscription title</th>
	       		<th>Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#groupId = createGroup(#TEXT)">group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#idToUpdate = subscribe(#TEXT, #groupId)">feed1</td>
	       		<td concordion:echo="#idToUpdate"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed2</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed3</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	   	</table>
		<p>
			when he moves subscription #<span concordion:echo="#idToUpdate"></span> <span concordion:execute="moveSubscription(#groupId, #idToUpdate, #TEXT)">up</span><br/>
			then the subscription count of group #<span concordion:echo="#groupId"></span> is <span concordion:assertEquals="getSubscriptionCount(#groupId)">3</span><br/>
			and the subscription list contains:
		</p>
		<table concordion:verifyRows="#subscription : getSubscriptions()">
			<tr>
	       		<th concordion:assertEquals="#subscription.groupTitle">Group title</th>
	       		<th concordion:echo="#subscription.groupId">Group ID</th>
	       		<th concordion:assertEquals="#subscription.title">Subscription title</th>
	       		<th concordion:echo="#subscription.id">Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed1</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed2</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed3</td>
	       		<td></td>
	       	</tr>
	   	</table>
	   	
	   	<p>
			Given <span concordion:execute="initUser(#TEXT)">user9</span> has the following subscriptions:
		</p>
		<table>
	       	<tr>
	       		<th>Group title</th>
	       		<th>Group ID</th>
	       		<th>Subscription title</th>
	       		<th>Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#groupId = createGroup(#TEXT)">group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed1</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed2</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#idToUpdate = subscribe(#TEXT, #groupId)">feed3</td>
	       		<td concordion:echo="#idToUpdate"></td>
	       	</tr>
	   	</table>
		<p>
			when he moves subscription #<span concordion:echo="#idToUpdate"></span> <span concordion:execute="moveSubscription(#groupId, #idToUpdate, #TEXT)">down</span><br/>
			then the subscription count of group #<span concordion:echo="#groupId"></span> is <span concordion:assertEquals="getSubscriptionCount(#groupId)">3</span><br/>
			and the subscription list contains:
		</p>
		<table concordion:verifyRows="#subscription : getSubscriptions()">
			<tr>
	       		<th concordion:assertEquals="#subscription.groupTitle">Group title</th>
	       		<th concordion:echo="#subscription.groupId">Group ID</th>
	       		<th concordion:assertEquals="#subscription.title">Subscription title</th>
	       		<th concordion:echo="#subscription.id">Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed1</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed2</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed3</td>
	       		<td></td>
	       	</tr>
	   	</table>
	   	
	   	<p>
			Given <span concordion:execute="initUser(#TEXT)">user10</span> has the following subscriptions:
		</p>
		<table>
	       	<tr>
	       		<th>Group title</th>
	       		<th>Group ID</th>
	       		<th>Subscription title</th>
	       		<th>Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#groupId = createGroup(#TEXT)">group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed1</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed2</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#idToUpdate = createGroup(#TEXT)">group2</td>
	       		<td concordion:echo="#idToUpdate"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #idToUpdate)">feed3</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group2</td>
	       		<td concordion:echo="#idToUpdate"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #idToUpdate)">feed4</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	   	</table>
		<p>
			when he moves group #<span concordion:echo="#idToUpdate"></span> <span concordion:execute="moveGroup(#idToUpdate, #TEXT)">up</span><br/>
			then the subscription list contains:
		</p>
		<table concordion:verifyRows="#subscription : getSubscriptions()">
			<tr>
	       		<th concordion:assertEquals="#subscription.groupTitle">Group title</th>
	       		<th concordion:echo="#subscription.groupId">Group ID</th>
	       		<th concordion:assertEquals="#subscription.title">Subscription title</th>
	       		<th concordion:echo="#subscription.id">Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td>group2</td>
	       		<td></td>
	       		<td>feed3</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group2</td>
	       		<td></td>
	       		<td>feed4</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed1</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed2</td>
	       		<td></td>
	       	</tr>
	   	</table>
	   	
	   	<p>
			Given <span concordion:execute="initUser(#TEXT)">user11</span> has the following subscriptions:
		</p>
		<table>
	       	<tr>
	       		<th>Group title</th>
	       		<th>Group ID</th>
	       		<th>Subscription title</th>
	       		<th>Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#idToUpdate = createGroup(#TEXT)">group1</td>
	       		<td concordion:echo="#idToUpdate"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #idToUpdate)">feed1</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#idToUpdate"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #idToUpdate)">feed2</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#groupId = createGroup(#TEXT)">group2</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed3</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group2</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed4</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	   	</table>
		<p>
			when he moves group #<span concordion:echo="#idToUpdate"></span> <span concordion:execute="moveGroup(#idToUpdate, #TEXT)">down</span><br/>
			then the subscription list contains:
		</p>
		<table concordion:verifyRows="#subscription : getSubscriptions()">
			<tr>
	       		<th concordion:assertEquals="#subscription.groupTitle">Group title</th>
	       		<th concordion:echo="#subscription.groupId">Group ID</th>
	       		<th concordion:assertEquals="#subscription.title">Subscription title</th>
	       		<th concordion:echo="#subscription.id">Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td>group2</td>
	       		<td></td>
	       		<td>feed3</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group2</td>
	       		<td></td>
	       		<td>feed4</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed1</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed2</td>
	       		<td></td>
	       	</tr>
	   	</table>
	   	
	   	<p>
			Given <span concordion:execute="initUser(#TEXT)">user12</span> has the following subscriptions:
		</p>
		<table>
	       	<tr>
	       		<th>Group title</th>
	       		<th>Group ID</th>
	       		<th>Subscription title</th>
	       		<th>Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#groupId = createGroup(#TEXT)">group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed1</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed2</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#groupIdToUpdate = createGroup(#TEXT)">group2</td>
	       		<td concordion:echo="#groupIdToUpdate"></td>
	       		<td concordion:execute="#idToUpdate = subscribe(#TEXT, #groupIdToUpdate)">feed3</td>
	       		<td concordion:echo="#idToUpdate"></td>
	       	</tr>
	       	<tr>
	       		<td>group2</td>
	       		<td concordion:echo="#groupIdToUpdate"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupIdToUpdate)">feed4</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	   	</table>
		<p>
			when he moves subscription #<span concordion:echo="#idToUpdate"></span> <span concordion:execute="moveSubscription(#groupIdToUpdate, #idToUpdate, #TEXT)">up</span><br/>
			then the subscription list contains:
		</p>
		<table concordion:verifyRows="#subscription : getSubscriptions()">
			<tr>
	       		<th concordion:assertEquals="#subscription.groupTitle">Group title</th>
	       		<th concordion:echo="#subscription.groupId">Group ID</th>
	       		<th concordion:assertEquals="#subscription.title">Subscription title</th>
	       		<th concordion:echo="#subscription.id">Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed1</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed2</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group2</td>
	       		<td></td>
	       		<td>feed3</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group2</td>
	       		<td></td>
	       		<td>feed4</td>
	       		<td></td>
	       	</tr>
	   	</table>
	   	
	   	<p>
			Given <span concordion:execute="initUser(#TEXT)">user13</span> has the following subscriptions:
		</p>
		<table>
	       	<tr>
	       		<th>Group title</th>
	       		<th>Group ID</th>
	       		<th>Subscription title</th>
	       		<th>Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#groupIdToUpdate = createGroup(#TEXT)">group1</td>
	       		<td concordion:echo="#groupIdToUpdate"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupIdToUpdate)">feed1</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td concordion:echo="#groupIdToUpdate"></td>
	       		<td concordion:execute="#idToUpdate = subscribe(#TEXT, #groupIdToUpdate)">feed2</td>
	       		<td concordion:echo="#idToUpdate"></td>
	       	</tr>
	       	<tr>
	       		<td concordion:execute="#groupId = createGroup(#TEXT)">group2</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed3</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	       	<tr>
	       		<td>group2</td>
	       		<td concordion:echo="#groupId"></td>
	       		<td concordion:execute="#subscriptionId = subscribe(#TEXT, #groupId)">feed4</td>
	       		<td concordion:echo="#subscriptionId"></td>
	       	</tr>
	   	</table>
		<p>
			when he moves subscription #<span concordion:echo="#idToUpdate"></span> <span concordion:execute="moveSubscription(#groupIdToUpdate, #idToUpdate, #TEXT)">down</span><br/>
			then the subscription list contains:
		</p>
		<table concordion:verifyRows="#subscription : getSubscriptions()">
			<tr>
	       		<th concordion:assertEquals="#subscription.groupTitle">Group title</th>
	       		<th concordion:echo="#subscription.groupId">Group ID</th>
	       		<th concordion:assertEquals="#subscription.title">Subscription title</th>
	       		<th concordion:echo="#subscription.id">Subscription ID</th>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed1</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group1</td>
	       		<td></td>
	       		<td>feed2</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group2</td>
	       		<td></td>
	       		<td>feed3</td>
	       		<td></td>
	       	</tr>
	       	<tr>
	       		<td>group2</td>
	       		<td></td>
	       		<td>feed4</td>
	       		<td></td>
	       	</tr>
	   	</table>
	   	
	</body>
</html>