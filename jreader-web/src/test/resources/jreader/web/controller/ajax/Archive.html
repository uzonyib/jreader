<html xmlns:concordion="http://www.concordion.org/2007/concordion">
	<head>
		<title>Archive related tests</title>
	</head>
	<body>
	
		<h1>Archive related tests</h1>
		
		<p>
			When <span concordion:execute="initUser(#TEXT)">archive_user</span> is a new user<br/>
			then the archive count is <span concordion:assertEquals="getArchiveCount()">0</span>.
		</p>
		
		<p>
			When the user creates a new archive with title <span concordion:execute="#archiveId1 = createArchive(#TEXT)">archive1</span><br/>
			then the archive count is <span concordion:assertEquals="getArchiveCount()">1</span><br/>
			and the archive list contains:
		</p>
		<table concordion:verifyRows="#archive : getArchives()">
			<tr>
				<th concordion:echo="#archive.id">ID</th>
				<th concordion:assertEquals="#archive.title">Title</th>
			</tr>
			<tr>
				<td></td>
				<td>archive1</td>
			</tr>
		</table>
		
		<p>
			When the user tries to create a new archive with <span concordion:execute="createArchive(#TEXT)">empty string</span> as title<br/>
			then the archive count is still <span concordion:assertEquals="getArchiveCount()">1</span><br/>
			and the archive list contains:
		</p>
		<table concordion:verifyRows="#archive : getArchives()">
			<tr>
				<th concordion:echo="#archive.id">ID</th>
				<th concordion:assertEquals="#archive.title">Title</th>
			</tr>
			<tr>
				<td></td>
				<td>archive1</td>
			</tr>
		</table>
	   	
	   	<p>
			When the user tries to create a new archive with title <span concordion:execute="createArchive(#TEXT)">archive1</span><br/>
			then the archive count is still <span concordion:assertEquals="getArchiveCount()">1</span><br/>
			and the archive list contains:
		</p>
		<table concordion:verifyRows="#archive : getArchives()">
			<tr>
				<th concordion:echo="#archive.id">ID</th>
				<th concordion:assertEquals="#archive.title">Title</th>
			</tr>
			<tr>
				<td></td>
				<td>archive1</td>
			</tr>
		</table>
	   	
	   	<p>
			When the user creates the following archives:
		</p>
		<table>
			<tr>
				<th>Title</th>
				<th>ID</th>
			</tr>
			<tr>
				<td concordion:execute="#archiveId2 = createArchive(#TEXT)">archive2</td>
				<td concordion:echo="#archiveId2"></td>
			</tr>
			<tr>
				<td concordion:execute="#archiveId3 = createArchive(#TEXT)">archive3</td>
				<td concordion:echo="#archiveId3"></td>
			</tr>
			<tr>
				<td concordion:execute="#archiveId4 = createArchive(#TEXT)">archive4</td>
				<td concordion:echo="#archiveId4"></td>
			</tr>
		</table>
		<p>
			then the archive count is <span concordion:assertEquals="getArchiveCount()">4</span><br/>
			and the archive list contains:
		</p>
		<table concordion:verifyRows="#archive : getArchives()">
			<tr>
				<th concordion:assertEquals="#archive.title">Title</th>
				<th concordion:echo="#archive.id">ID</th>
			</tr>
			<tr>
				<td>archive1</td>
				<td></td>
			</tr>
			<tr>
				<td>archive2</td>
				<td></td>
			</tr>
			<tr>
				<td>archive3</td>
				<td></td>
			</tr>
			<tr>
				<td>archive4</td>
				<td></td>
			</tr>
		</table>
	   	
		<p>
			When the user deletes archive #<span concordion:execute="deleteArchive(#archiveId3)"><span concordion:echo="#archiveId3"></span></span><br/>
			then the archive count is <span concordion:assertEquals="getArchiveCount()">3</span><br/>
			and the archive list contains:
		</p>
		<table concordion:verifyRows="#archive : getArchives()">
			<tr>
				<th concordion:assertEquals="#archive.title">Title</th>
				<th concordion:echo="#archive.id">ID</th>
			</tr>
			<tr>
				<td>archive1</td>
				<td></td>
			</tr>
			<tr>
				<td>archive2</td>
				<td></td>
			</tr>
			<tr>
				<td>archive4</td>
				<td></td>
			</tr>
		</table>
	   	
		<p>
			When the user changes the title of archive #<span concordion:echo="#archiveId2"></span> to <span concordion:execute="entitleArchive(#archiveId2, #TEXT)">test</span><br/>
			then the archive count is <span concordion:assertEquals="getArchiveCount()">3</span><br/>
			and the archive list contains:
		</p>
		<table concordion:verifyRows="#archive : getArchives()">
			<tr>
				<th concordion:assertEquals="#archive.title">Title</th>
				<th concordion:echo="#archive.id">ID</th>
			</tr>
			<tr>
				<td>archive1</td>
				<td></td>
			</tr>
			<tr>
				<td>test</td>
				<td></td>
			</tr>
			<tr>
				<td>archive4</td>
				<td></td>
			</tr>
		</table>
		
		<p>
			When the user tries to change the title of archive #<span concordion:echo="#archiveId2"></span> to <span concordion:execute="entitleArchive(#archiveId2, #TEXT)">empty string</span><br/>
			then the archive count is <span concordion:assertEquals="getArchiveCount()">3</span><br/>
			and the archive list contains:
		</p>
		<table concordion:verifyRows="#archive : getArchives()">
			<tr>
				<th concordion:assertEquals="#archive.title">Title</th>
				<th concordion:echo="#archive.id">ID</th>
			</tr>
			<tr>
				<td>archive1</td>
				<td></td>
			</tr>
			<tr>
				<td>test</td>
				<td></td>
			</tr>
			<tr>
				<td>archive4</td>
				<td></td>
			</tr>
		</table>
		
		<p>
			When the user tries to change the title of archive #<span concordion:echo="#archiveId2"></span> to <span concordion:execute="entitleArchive(#archiveId2, #TEXT)">archive1</span><br/>
			then the archive count is <span concordion:assertEquals="getArchiveCount()">3</span><br/>
			and the archive list contains:
		</p>
		<table concordion:verifyRows="#archive : getArchives()">
			<tr>
				<th concordion:assertEquals="#archive.title">Title</th>
				<th concordion:echo="#archive.id">ID</th>
			</tr>
			<tr>
				<td>archive1</td>
				<td></td>
			</tr>
			<tr>
				<td>test</td>
				<td></td>
			</tr>
			<tr>
				<td>archive4</td>
				<td></td>
			</tr>
		</table>
	   	
		<p>
			When the user moves archive #<span concordion:echo="#archiveId2"></span> <span concordion:execute="moveArchive(#archiveId2, #TEXT)">up</span><br/>
			then the archive count is <span concordion:assertEquals="getArchiveCount()">3</span><br/>
			and the archive list contains:
		</p>
		<table concordion:verifyRows="#archive : getArchives()">
			<tr>
				<th concordion:assertEquals="#archive.title">Title</th>
				<th concordion:echo="#archive.id">ID</th>
			</tr>
			<tr>
				<td>test</td>
				<td></td>
			</tr>
			<tr>
				<td>archive1</td>
				<td></td>
			</tr>
			<tr>
				<td>archive4</td>
				<td></td>
			</tr>
		</table>

		<p>
			When the user moves archive #<span concordion:echo="#archiveId1"></span> <span concordion:execute="moveArchive(#archiveId1, #TEXT)">down</span><br/>
			then the archive count is <span concordion:assertEquals="getArchiveCount()">3</span><br/>
			and the archive list contains:
		</p>
		<table concordion:verifyRows="#archive : getArchives()">
			<tr>
				<th concordion:assertEquals="#archive.title">Title</th>
				<th concordion:echo="#archive.id">ID</th>
			</tr>
			<tr>
				<td>test</td>
				<td></td>
			</tr>
			<tr>
				<td>archive4</td>
				<td></td>
			</tr>
			<tr>
				<td>archive1</td>
				<td></td>
			</tr>
		</table>
	   	
		<p>
			When the user moves archive #<span concordion:echo="#archiveId2"></span> <span concordion:execute="moveArchive(#archiveId2, #TEXT)">up</span><br/>
			then the archive count is <span concordion:assertEquals="getArchiveCount()">3</span><br/>
			and the archive list contains:
		</p>
		<table concordion:verifyRows="#archive : getArchives()">
			<tr>
				<th concordion:assertEquals="#archive.title">Title</th>
				<th concordion:echo="#archive.id">ID</th>
			</tr>
			<tr>
				<td>test</td>
				<td></td>
			</tr>
			<tr>
				<td>archive4</td>
				<td></td>
			</tr>
			<tr>
				<td>archive1</td>
				<td></td>
			</tr>
		</table>
	   	
		<p>
			When the user moves archive #<span concordion:echo="#archiveId1"></span> <span concordion:execute="moveArchive(#archiveId1, #TEXT)">down</span><br/>
			then the archive count is <span concordion:assertEquals="getArchiveCount()">3</span><br/>
			and the archive list contains:
		</p>
		<table concordion:verifyRows="#archive : getArchives()">
	       	<tr>
				<th concordion:assertEquals="#archive.title">Title</th>
				<th concordion:echo="#archive.id">ID</th>
			</tr>
			<tr>
				<td>test</td>
				<td></td>
			</tr>
			<tr>
				<td>archive4</td>
				<td></td>
			</tr>
			<tr>
				<td>archive1</td>
				<td></td>
			</tr>
	   	</table>
	   	
	   	<p>What if a archive with the same name already exists?</p>
	   	
	</body>
</html>